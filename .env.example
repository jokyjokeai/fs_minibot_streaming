# MiniBotPanel v3 - Environment Variables
# Copiez ce fichier vers .env et configurez vos valeurs

# ============================================
# DATABASE
# ============================================
DATABASE_URL=postgresql://minibot:minibot@localhost:5432/minibot_freeswitch

# ============================================
# FREESWITCH ESL
# ============================================
FREESWITCH_ESL_HOST=localhost
FREESWITCH_ESL_PORT=8021
FREESWITCH_ESL_PASSWORD=ClueCon

# Numéro émetteur (CallerID)
FREESWITCH_CALLER_ID=+33123456789

# Dossier FreeSWITCH pour fichiers audio traités (8kHz µ-law)
# Path où setup_audio.py copie les fichiers normalisés
FREESWITCH_SOUNDS_DIR=/usr/share/freeswitch/sounds/minibot

# ============================================
# AI SERVICES
# ============================================

# Vosk STT
VOSK_MODEL_PATH=models/vosk-model-small-fr-0.22
VOSK_SAMPLE_RATE=8000

# Ollama NLP
OLLAMA_URL=http://localhost:11434
OLLAMA_MODEL=mistral:7b
OLLAMA_TIMEOUT=30

# TTS REMOVED - Using pre-recorded audio only (v3)
# Coqui TTS removed - no longer needed

# HuggingFace REMOVED - pyannote.audio no longer needed (v3)

# ============================================
# AUDIO SETUP (FreeSWITCH Integration)
# ============================================
# Dossier FreeSWITCH pour fichiers audio traités
FREESWITCH_SOUNDS_DIR=/usr/share/freeswitch/sounds/minibot

# Format audio traité par setup_audio.py:
# - 16kHz mono PCM 16-bit (wideband, haute qualité)
# - Normalisation peak -3dB + RMS -18dB
# - Compatible FreeSWITCH G.722 et Opus

# Ajustement volume global (défaut 0dB = pas de boost, normalisation suffit)
# Utiliser valeurs négatives si trop fort, positives si trop faible
AUDIO_VOLUME_ADJUST=0.0

# Réduction volume background audio (défaut -10dB sous voix principale)
AUDIO_BACKGROUND_REDUCTION=-10.0

# Voix par défaut
DEFAULT_VOICE=julie

# ============================================
# AMD (ANSWERING MACHINE DETECTION)
# ============================================
AMD_DUAL_LAYER=true
AMD_MAX_GREETING_TIME=5.0
AMD_MAX_WORDS=3
AMD_SILENCE_THRESHOLD=0.5

# ============================================
# SYSTEM LIMITS
# ============================================
MAX_CONCURRENT_CALLS=10
DELAY_BETWEEN_CALLS=2
CALL_TIMEOUT=300
RESPONSE_TIMEOUT=10

# ============================================
# RECORDING CLEANUP
# ============================================
# Automatic cleanup of old recordings to prevent disk saturation
RECORDING_CLEANUP_ENABLED=true
RECORDING_RETENTION_DAYS=7              # Delete recordings older than 7 days
RECORDING_CLEANUP_DISK_THRESHOLD=80     # Trigger cleanup at 80% disk usage
RECORDING_CLEANUP_DISK_TARGET=70        # Target 70% after cleanup

# ============================================
# CACHE & PERFORMANCE
# ============================================
PRELOAD_MODELS=true
CACHE_SCENARIOS=true
CACHE_VOICES=true

# ============================================
# API REST
# ============================================
API_HOST=0.0.0.0
API_PORT=8000
API_RELOAD=true
API_WORKERS=4

# CORS (optionnel, pour frontend)
API_CORS_ORIGINS=http://localhost:3000,http://localhost:8080

# Protection API simple (mot de passe unique)
API_PASSWORD=changez_moi_en_production

# ============================================
# LOGGING
# ============================================
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=logs/minibot.log
LOG_ROTATION=1 day
LOG_RETENTION=30 days

# ============================================
# PATHS
# ============================================
BASE_DIR=.
AUDIO_DIR=audio
VOICES_DIR=voices
RECORDINGS_DIR=recordings
TRANSCRIPTIONS_DIR=transcriptions
EXPORTS_DIR=exports
LOGS_DIR=logs

# ============================================
# MONITORING
# ============================================
PROMETHEUS_ENABLED=false
PROMETHEUS_PORT=9090

# ============================================
# DEVELOPMENT
# ============================================
DEBUG=false
TESTING=false

# ============================================
# NOTES
# ============================================
#
# 1. Copiez ce fichier:
#    cp .env.example .env
#
# 2. Modifiez les valeurs selon votre configuration
#
# 3. IMPORTANT: Ne commitez JAMAIS le fichier .env (déjà dans .gitignore)
#
# 4. Pour la production:
#    - Changez tous les mots de passe par défaut
#    - Configurez votre provider SIP dans FreeSWITCH
#    - Activez GPU si disponible (COQUI_USE_GPU=true)
