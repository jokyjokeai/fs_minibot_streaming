{
  "metadata": {
    "name": "scen_test",
    "description": "Scenario de test - Trading Robot IA - Objections Matcher avec max_turns=2",
    "version": "3.0",
    "theme_file": "objections_finance",
    "voice": "julie",
    "barge_in_default": true,
    "objective": "Prise de rendez-vous Trading IA",
    "fallbacks": {
      "silence": "retry_silence",
      "unknown": "not_understood",
      "deny": "bye_failed"
    }
  },
  "variables": {
    "first_name": "{{first_name}}",
    "company_name": "Trading Robot IA",
    "agent_name": "Julie"
  },
  "steps": {
    "hello": {
      "message_text": "Bonjour, je suis Julie de MiniBotPanel Demo. Je vous appelle pour une etude rapide. Vous avez 2 minutes?",
      "audio_file": "/usr/share/freeswitch/sounds/minibot/julie/base/hello.wav",
      "audio_type": "audio",
      "voice": "julie",
      "barge_in": true,
      "timeout": 15,
      "max_autonomous_turns": 2,
      "intent_mapping": {
        "affirm": "q1",
        "deny": "retry_hello",
        "unsure": "q1",
        "silence": "retry_silence",
        "*": "retry_hello"
      }
    },
    "retry_hello": {
      "message_text": "C'est vraiment tres rapide, juste 2 minutes. Vous etes disponible maintenant?",
      "audio_file": "/usr/share/freeswitch/sounds/minibot/julie/base/retry_hello.wav",
      "audio_type": "audio",
      "voice": "julie",
      "barge_in": true,
      "timeout": 15,
      "max_autonomous_turns": 2,
      "intent_mapping": {
        "affirm": "q1",
        "deny": "bye_failed",
        "unsure": "q1",
        "silence": "bye_failed",
        "*": "bye_failed"
      }
    },
    "retry_silence": {
      "message_text": "Allo? Vous m'entendez bien? Je peux continuer?",
      "audio_file": "/usr/share/freeswitch/sounds/minibot/julie/base/retry_silence.wav",
      "audio_type": "audio",
      "voice": "julie",
      "barge_in": true,
      "timeout": 10,
      "max_autonomous_turns": 2,
      "intent_mapping": {
        "affirm": "{{return_step}}",
        "deny": "bye_failed",
        "unsure": "{{return_step}}",
        "silence": "end",
        "*": "{{return_step}}"
      }
    },
    "retry_global": {
      "message_text": "Je comprends votre hesitation. Ecoutez, c'est sans engagement, juste un echange avec un expert. Qu'en dites-vous?",
      "audio_file": "/usr/share/freeswitch/sounds/minibot/julie/base/retry_global.wav",
      "audio_type": "audio",
      "voice": "julie",
      "barge_in": true,
      "timeout": 15,
      "max_autonomous_turns": 2,
      "intent_mapping": {
        "affirm": "{{return_step}}",
        "deny": "bye_failed",
        "unsure": "{{return_step}}",
        "silence": "bye_failed",
        "*": "bye_failed"
      }
    },
    "q1": {
      "message_text": "Premiere question : Etes-vous proprietaire de votre logement?",
      "audio_file": "/usr/share/freeswitch/sounds/minibot/julie/base/q1.wav",
      "audio_type": "audio",
      "voice": "julie",
      "barge_in": true,
      "timeout": 15,
      "max_autonomous_turns": 2,
      "intent_mapping": {
        "affirm": "q2",
        "deny": "q2",
        "unsure": "q2",
        "silence": "retry_silence",
        "*": "q2"
      }
    },
    "q2": {
      "message_text": "Deuxieme question : Avez-vous plus de 55 ans?",
      "audio_file": "/usr/share/freeswitch/sounds/minibot/julie/base/q2.wav",
      "audio_type": "audio",
      "voice": "julie",
      "barge_in": true,
      "timeout": 15,
      "max_autonomous_turns": 2,
      "intent_mapping": {
        "affirm": "q3",
        "deny": "q3",
        "unsure": "q3",
        "silence": "retry_silence",
        "*": "q3"
      }
    },
    "q3": {
      "message_text": "Derniere question : Seriez-vous interesse par des travaux de renovation energetique?",
      "audio_file": "/usr/share/freeswitch/sounds/minibot/julie/base/q3.wav",
      "audio_type": "audio",
      "voice": "julie",
      "barge_in": true,
      "timeout": 15,
      "max_autonomous_turns": 2,
      "intent_mapping": {
        "affirm": "is_leads",
        "deny": "is_leads",
        "unsure": "is_leads",
        "silence": "retry_silence",
        "*": "is_leads"
      }
    },
    "is_leads": {
      "message_text": "Parfait! Je peux vous proposer un rendez-vous avec un conseiller cette semaine. Ca vous interesse?",
      "audio_file": "/usr/share/freeswitch/sounds/minibot/julie/base/is_leads.wav",
      "audio_type": "audio",
      "voice": "julie",
      "barge_in": true,
      "timeout": 15,
      "max_autonomous_turns": 2,
      "intent_mapping": {
        "affirm": "confirm_time",
        "deny": "retry_is_leads",
        "unsure": "confirm_time",
        "silence": "retry_silence",
        "*": "retry_is_leads"
      }
    },
    "retry_is_leads": {
      "message_text": "C'est gratuit et sans engagement. On vous rappelle juste pour fixer les details. Qu'en dites-vous?",
      "audio_file": "/usr/share/freeswitch/sounds/minibot/julie/base/retry_is_leads.wav",
      "audio_type": "audio",
      "voice": "julie",
      "barge_in": true,
      "timeout": 15,
      "max_autonomous_turns": 2,
      "intent_mapping": {
        "affirm": "confirm_time",
        "deny": "bye_failed",
        "unsure": "confirm_time",
        "silence": "retry_silence",
        "*": "bye_failed"
      }
    },
    "confirm_time": {
      "message_text": "Excellent! Un conseiller vous rappellera sous 48h pour planifier le rendez-vous. C'est note!",
      "audio_file": "/usr/share/freeswitch/sounds/minibot/julie/base/confirm_time.wav",
      "audio_type": "audio",
      "voice": "julie",
      "barge_in": true,
      "timeout": 15,
      "max_autonomous_turns": 2,
      "intent_mapping": {
        "affirm": "bye",
        "time": "bye",
        "deny": "bye",
        "unsure": "bye",
        "silence": "retry_silence",
        "*": "bye"
      }
    },
    "bye": {
      "message_text": "Merci beaucoup pour votre temps! A tres bientot. Bonne journee!",
      "audio_file": "/usr/share/freeswitch/sounds/minibot/julie/base/bye.wav",
      "audio_type": "audio",
      "voice": "julie",
      "barge_in": false,
      "timeout": 5,
      "is_terminal": true,
      "result": "completed",
      "intent_mapping": {
        "*": "end"
      }
    },
    "bye_failed": {
      "message_text": "Je comprends. Merci quand meme et bonne journee!",
      "audio_file": "/usr/share/freeswitch/sounds/minibot/julie/base/bye_failed.wav",
      "audio_type": "audio",
      "voice": "julie",
      "barge_in": false,
      "timeout": 5,
      "is_terminal": true,
      "result": "failed",
      "intent_mapping": {
        "*": "end"
      }
    },
    "not_understood": {
      "message_text": "Desolee, je n'ai pas bien compris. Pouvez-vous repeter s'il vous plait?",
      "audio_file": "/usr/share/freeswitch/sounds/minibot/julie/base/not_understood.wav",
      "audio_type": "audio",
      "voice": "julie",
      "barge_in": true,
      "timeout": 15,
      "max_autonomous_turns": 2,
      "intent_mapping": {
        "affirm": "{{return_step}}",
        "deny": "{{return_step}}",
        "unsure": "{{return_step}}",
        "silence": "retry_silence",
        "*": "{{return_step}}"
      }
    },
    "end": {
      "message_text": "Au revoir.",
      "audio_file": "/usr/share/freeswitch/sounds/minibot/julie/base/end.wav",
      "audio_type": "audio",
      "voice": "julie",
      "barge_in": false,
      "timeout": 0,
      "is_terminal": true,
      "result": "ended",
      "intent_mapping": {}
    }
  },
  "flow_summary": {
    "description": "Scenario Trading Robot IA - Test Objections Matcher avec max_turns=2",
    "flow": "hello -> retry_hello/retry_silence -> q1 -> q2 -> q3 -> is_leads -> retry_is_leads -> confirm_time -> bye/bye_failed -> end",
    "features_v3": {
      "is_terminal": "Sur bye, bye_failed, end",
      "fallbacks": "Configures dans metadata",
      "max_autonomous_turns": 2,
      "theme_file": "objections_finance"
    },
    "objection_matching": {
      "theme": "objections_finance",
      "max_turns": 2,
      "description": "Le robot repond jusqu'a 2 fois aux objections/questions par etape avant de continuer"
    }
  }
}
