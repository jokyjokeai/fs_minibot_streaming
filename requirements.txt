# ============================================================================
# FS MiniBot Streaming - Requirements Unifié
# Python 3.10 ou 3.11 UNIQUEMENT (3.13 incompatible)
# Date: 2025-11-02
# ============================================================================

# ============================================================================
# CRITIQUE: PyTorch + numpy (INSTALLER EN PREMIER)
# ============================================================================
# Pour CPU (VPS sans GPU):
#   pip install --index-url https://download.pytorch.org/whl/cpu \
#       torch==2.4.0 torchaudio==2.4.0 torchvision==0.19.0
#
# Pour GPU (CUDA 11.8):
#   pip install --index-url https://download.pytorch.org/whl/cu118 \
#       torch==2.4.0 torchaudio==2.4.0 torchvision==0.19.0
#
# Pour GPU (CUDA 12.1):
#   pip install --index-url https://download.pytorch.org/whl/cu121 \
#       torch==2.4.0 torchaudio==2.4.0 torchvision==0.19.0

torch==2.4.0
torchaudio==2.4.0
torchvision==0.19.0
numpy==1.25.2

# ============================================================================
# Transformers (après PyTorch)
# ============================================================================
transformers==4.46.3
huggingface-hub
safetensors
tokenizers
regex

# ============================================================================
# Chatterbox TTS Dependencies (avant Chatterbox)
# ============================================================================
resemble-perth
s3tokenizer
onnxruntime
gradio==5.44.1
pykakasi
spacy-pkuseg
diffusers==0.29.0

# Chatterbox stress (depuis GitHub)
# pip install git+https://github.com/Vuizur/add-stress-to-epub

# ============================================================================
# Chatterbox TTS (SEUL moteur TTS)
# ============================================================================
# Installation manuelle APRÈS les dépendances ci-dessus:
#   pip install git+https://github.com/resemble-ai/chatterbox.git --no-deps
#
# ❌ Coqui TTS RETIRÉ (remplacé par Chatterbox uniquement)
# ❌ networkx RETIRÉ (était seulement pour Coqui TTS)

# ============================================================================
# Audio Processing Stack
# ============================================================================
soundfile==0.12.1
pydub==0.25.1
scipy==1.11.4
librosa==0.10.1
webrtcvad==2.0.10
noisereduce==3.0.2

# ============================================================================
# UVR (Ultimate Vocal Remover)
# ============================================================================
audio-separator==0.12.0

# ============================================================================
# Speaker Diarization (Custom - pas pyannote)
# ============================================================================
scikit-learn>=1.3.2
joblib
threadpoolctl

# ============================================================================
# YouTube Extraction
# ============================================================================
yt-dlp>=2024.10.22
certifi
mutagen
pycryptodome
websockets
brotli

# ============================================================================
# Speech-to-Text (Vosk)
# ============================================================================
vosk==0.3.45
cffi
srt

# ============================================================================
# NLP & AI
# ============================================================================
ollama>=0.6.0
requests==2.31.0

# ============================================================================
# Web Framework
# ============================================================================
fastapi==0.118.2
uvicorn[standard]==0.27.0
python-multipart==0.0.6
pydantic==2.12.0
pydantic-settings>=2.1.0

# ============================================================================
# Database
# ============================================================================
sqlalchemy==2.0.25
psycopg2-binary==2.9.11
alembic==1.13.1

# ============================================================================
# Utilities
# ============================================================================
python-dotenv==1.1.1
python-json-logger==2.0.7
colorama==0.4.6
click==8.3.0
tabulate==0.9.0
openpyxl==3.1.2
phonenumbers==8.13.27
invoke==2.2.1
tqdm>=4.66.0
prometheus-client==0.19.0

# ============================================================================
# Notes d'Installation
# ============================================================================
#
# ORDRE STRICT:
#
# 1. System dependencies (si Linux):
#    sudo apt-get install -y ffmpeg postgresql-14 libpq-dev
#
# 2. Venv:
#    python3.11 -m venv venv
#    source venv/bin/activate
#
# 3. Pip upgrade:
#    pip install --upgrade pip setuptools wheel
#
# 4. PyTorch (choisir CPU ou GPU):
#    pip install --index-url https://download.pytorch.org/whl/cpu \
#        torch==2.4.0 torchaudio==2.4.0 torchvision==0.19.0
#
# 5. numpy:
#    pip install numpy==1.25.2
#
# 6. Transformers:
#    pip install transformers==4.46.3
#
# 7. Chatterbox dependencies:
#    pip install resemble-perth s3tokenizer onnxruntime gradio==5.44.1
#    pip install pykakasi spacy-pkuseg diffusers==0.29.0
#    pip install git+https://github.com/Vuizur/add-stress-to-epub
#
# 8. Chatterbox (--no-deps IMPORTANT):
#    pip install git+https://github.com/resemble-ai/chatterbox.git --no-deps
#
# 9. Reste des requirements:
#    pip install -r requirements.txt
#
# ============================================================================
