# MiniBotPanel v3 - Requirements CPU-ONLY
# Python 3.11+ recommandé
# Pour GPU, utilisez requirements-gpu.txt

# ============================================
# WEB FRAMEWORK & API
# ============================================
fastapi==0.109.0
uvicorn[standard]==0.27.0
python-multipart==0.0.6
pydantic==2.12.0
pydantic-settings==2.1.0

# ============================================
# DATABASE
# ============================================
sqlalchemy==2.0.25
psycopg2-binary==2.9.11

# ============================================
# AI SERVICES - PyTorch CPU
# ============================================
--index-url https://download.pytorch.org/whl/cpu
torch==2.4.0
torchaudio==2.4.0
--index-url https://pypi.org/simple

numpy==1.26.4
transformers==4.46.3

# ============================================
# SPEECH-TO-TEXT (Vosk + Faster-Whisper)
# ============================================
vosk==0.3.45  # Fallback CPU-only STT
faster-whisper==1.1.0  # Primary STT (supports CPU with int8 compute)
soundfile==0.12.1
webrtcvad==2.0.10
websockets>=12.0

# ============================================
# NLP (Ollama)
# ============================================
ollama>=0.6.0
requests==2.31.0

# ============================================
# AUDIO PROCESSING
# ============================================
pydub==0.25.1
librosa==0.10.1
scipy==1.11.4
noisereduce==3.0.3  # Noise suppression (spectral gating)

# ============================================
# UTILITIES
# ============================================
python-dotenv==1.1.1
colorama==0.4.6
click==8.1.7
tabulate==0.9.0
openpyxl==3.1.2
phonenumbers==8.13.27
rich==14.2.0  # Colored logs and rich formatting
unidecode==1.3.6  # Unicode normalization (AMD keywords)
rapidfuzz==3.14.3  # Fuzzy matching for intents_db (v3.0)

# ============================================
# NOTES INSTALLATION
# ============================================
# 1. Créer venv Python 3.11:
#    python3.11 -m venv venv
#    source venv/bin/activate
#
# 2. Installer dépendances:
#    pip install --upgrade pip setuptools wheel
#    pip install -r requirements-cpu.txt
#
# 3. ESL FreeSWITCH:
#    Compiler depuis sources FreeSWITCH (voir documentation/install_fs_minibot.md)
#
# 4. Modèle Vosk français:
#    wget https://alphacephei.com/vosk/models/vosk-model-small-fr-0.22.zip
#    unzip vosk-model-small-fr-0.22.zip -d models/
#
# 5. Ollama (installer séparément):
#    https://ollama.ai/download
#    ollama pull mistral:7b

# ============================================
# CHANGEMENTS V3.1 (2025) - NETTOYAGE
# ============================================
# SUPPRIMÉ (packages jamais utilisés dans le code):
#   - huggingface-hub → Dépendance transitive de transformers (auto-installé)
#   - safetensors → Dépendance transitive de transformers (auto-installé)
#   - tokenizers → Dépendance transitive de transformers (auto-installé)
#   - TTS (Coqui) → Supprimé v3 (audio pré-enregistré uniquement)
#   - alembic → Pas de migrations DB automatiques
#   - prometheus-client → Monitoring non utilisé
#   - python-json-logger → Logging natif Python
#   - pytest/black/flake8 → Tools de dev (non nécessaires en production)
#
# CONSERVÉ (réellement utilisé):
#   - faster-whisper==1.1.0 → Primary STT (CPU int8 compute)
#   - vosk==0.3.45 → Fallback STT robuste
#   - ollama → NLP/Intent classification
#   - websockets → Streaming ASR temps réel
#   - All web/database/audio packages → Utilisés activement
#
# FASTER-WHISPER vs VOSK:
#   Faster-Whisper (primary): Meilleure qualité, support CPU avec int8 compute
#   Vosk (fallback): Robuste et rapide, utilisé si Faster-Whisper fail
#   Changement engine: STT_ENGINE=vosk ou STT_ENGINE=faster_whisper dans .env
